<html>
<head>
  <meta charset="UTF-8">
  <title>Proj 309 Login</title>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

    <script src="js_modules/p5.js"></script>
    <script src="js_modules/p5.play.js"></script>
  <!-- this line removes any default padding and style. you might only need one of these values set. -->
  <style> body {padding: 0; margin: 0;} </style>

</head>

<body>

  <form name="SpaceShip">
      Username<input type="text" name="userid"/>
      Password<input type="password" name="pswrd"/>
      <input type="button" onclick="check(this.form)" value="Login"/>
      <input type="reset" value="Cancel"/>
      <input type="button" onclick="window.open('signup.html', '_self')" value="Sign Up"/>
  </form>
  <script language="javascript">
    function check(form){
      var socket = io.connect('http://proj-309-la-1.cs.iastate.edu:3000');
      //var socket = io.connect('http://localhost:3000');
      var data = {
        UserName: form.userid.value,
        Pass: form.pswrd.value
      };
      socket.emit('checkDB', data);

      socket.on('checkedDB', function(data){
        if(!data){
          alert("Wrong Username or Password")/*displays error message*/
          location.reload();
        }
        else {
          window.open('experiment_selection.html','_self')/*opens the target page while Id & password matches*/
        }
      });
    }
  </script>
</body>
</html>
